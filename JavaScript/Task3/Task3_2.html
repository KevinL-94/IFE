<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Task3_2</title>
</head>
<body>
  <ul id="source">
    <li>北京空气质量：<b>90</b></li>
    <li>上海空气质量：<b>70</b></li>
    <li>天津空气质量：<b>80</b></li>
    <li>广州空气质量：<b>50</b></li>
    <li>深圳空气质量：<b>40</b></li>
    <li>福州空气质量：<b>32</b></li>
    <li>成都空气质量：<b>90</b></li>
  </ul>
  <ul id="resort">
    <!-- 
    <li>第一名：北京空气质量：<b>90</b></li>
    <li>第二名：北京空气质量：<b>90</b></li>
    <li>第三名：北京空气质量：<b>90</b></li>
     -->
  </ul>
  <button id="sort-btn">排序</button>

<script type="text/javascript">
  function getData() {
    var list = document.getElementById("source").children;
    var data = [];
    for (var i = 0; i < list.length; i++) {
      var city = list[i].innerText.split("空气质量")[0];
      var aqi = list[i].getElementsByTagName("b")[0].innerText;
      data.push([city, aqi]);
    }

    return data;
  }

  function sortByAqiData(data) {
    data.sort(function(value1, value2) {
      return value2[1] - value1[1];
    });

    return data;
  }

  function displayData(data) {
    var result = "";
    var chineseNum = ["一", "二", "三", "四", "五", "六", "七", "八", "九"];
    for (var i = 0; i < data.length; i++) {
      result += "<li>第" + chineseNum[i] + "名：" + data[i][0] + " 空气质量：" + data[i][1] + "</li> \n";
    }
    document.getElementById("resort").innerHTML = result;
  }

  function handler() {
    var aqiData = getData();
    aqiData = sortByAqiData(aqiData);
    displayData(aqiData);
  }

  function init() {
    var btn = document.getElementById("sort-btn");
    btn.addEventListener("click", handler);
  }

  init();
</script>
</body>
</html>